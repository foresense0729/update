<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAGFlow å®Œæ•´å®‰è£èˆ‡ä½¿ç”¨æ•™ç¨‹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            line-height: 1.6; color: #24292f; background-color: #ffffff;
            padding: 20px; max-width: 1200px; margin: 0 auto;
        }
        h1 { font-size: 2em; font-weight: 600; padding-bottom: 0.3em;
             border-bottom: 1px solid #d8dee4; margin-top: 24px; margin-bottom: 16px; }
        h2 { font-size: 1.5em; font-weight: 600; padding-bottom: 0.3em;
             border-bottom: 1px solid #d8dee4; margin-top: 24px; margin-bottom: 16px; }
        h3 { font-size: 1.25em; font-weight: 600; margin-top: 24px; margin-bottom: 16px; }
        h4 { font-size: 1em; font-weight: 600; margin-top: 24px; margin-bottom: 16px; }
        h5 { font-size: 0.875em; font-weight: 600; margin-top: 24px; margin-bottom: 16px; }
        p { margin-top: 0; margin-bottom: 16px; }
        a { color: #0969da; text-decoration: none; }
        a:hover { text-decoration: underline; }
        ul, ol { padding-left: 2em; margin-top: 0; margin-bottom: 16px; }
        li { margin-bottom: 0.25em; }
        blockquote {
            padding: 0 1em; color: #57606a; border-left: 0.25em solid #d0d7de;
            margin-top: 0; margin-bottom: 16px;
        }
        code {
            padding: 0.2em 0.4em; margin: 0; font-size: 85%;
            background-color: rgba(175,184,193,0.2); border-radius: 6px;
            font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
        }
        pre {
            padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45;
            background-color: #f6f8fa; border-radius: 6px; margin-top: 0; margin-bottom: 16px;
        }
        pre code { display: inline; padding: 0; margin: 0; overflow: visible;
                   line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; }
        table {
            border-spacing: 0; border-collapse: collapse; width: 100%;
            margin-top: 0; margin-bottom: 16px; display: block; overflow: auto;
        }
        table th {
            font-weight: 600; padding: 6px 13px; border: 1px solid #d0d7de;
            background-color: #f6f8fa;
        }
        table td { padding: 6px 13px; border: 1px solid #d0d7de; }
        table tr { background-color: #ffffff; border-top: 1px solid #d0d7de; }
        table tr:nth-child(2n) { background-color: #f6f8fa; }
        hr {
            height: 0.25em; padding: 0; margin: 24px 0;
            background-color: #d0d7de; border: 0;
        }
        strong { font-weight: 600; }
        em { font-style: italic; }
    </style>
</head>
<body>
<h1>RAGFlow å®Œæ•´å®‰è£èˆ‡ä½¿ç”¨æ•™ç¨‹</h1>

<blockquote><p>æœ¬æ•™ç¨‹é©ç”¨æ–¼ RAGFlow v0.22 åŠä»¥å¾Œç‰ˆæœ¬ï¼Œç‰¹åˆ¥èªªæ˜å¦‚ä½•é…ç½® BAAI/bge-large-zh-v1.5 å…§åµŒæ¨¡å‹</p></blockquote>

<h2>ç›®éŒ„</h2>

<ol>
<li><a href="#å‰ç½®ä½œæ¥­">å‰ç½®ä½œæ¥­</a></li>
<li><a href="#ä¸‹è¼‰èˆ‡è§£å£“ç¸®-ragflow">ä¸‹è¼‰èˆ‡è§£å£“ç¸® RAGFlow</a></li>
<li><a href="#é…ç½®æª”æ¡ˆä¿®æ”¹è©³è§£">é…ç½®æª”æ¡ˆä¿®æ”¹è©³è§£</a></li>
<li><a href="#å…§åµŒæ¨¡å‹é…ç½®">å…§åµŒæ¨¡å‹é…ç½®</a></li>
<li><a href="#å•Ÿå‹•-ragflow">å•Ÿå‹• RAGFlow</a></li>
<li><a href="#é¦–æ¬¡ç™»å…¥èˆ‡è¨­å®š">é¦–æ¬¡ç™»å…¥èˆ‡è¨­å®š</a></li>
<li><a href="#é©—è­‰èˆ‡æ¸¬è©¦">é©—è­‰èˆ‡æ¸¬è©¦</a></li>
</ol>

<hr>

<h2>å‰ç½®ä½œæ¥­</h2>

<h3>ç³»çµ±éœ€æ±‚</h3>

<p>åœ¨é–‹å§‹å®‰è£ RAGFlow ä¹‹å‰ï¼Œè«‹ç¢ºèªæ‚¨çš„ç³»çµ±ç¬¦åˆä»¥ä¸‹æœ€ä½éœ€æ±‚ï¼š</p>

<ul>
<li><strong>ä½œæ¥­ç³»çµ±</strong>: Windows 10/11ã€macOSã€Linux</li>
<li><strong>CPU</strong>: è‡³å°‘ 4 æ ¸å¿ƒ (x86 æ¶æ§‹)</li>
<li><strong>è¨˜æ†¶é«”</strong>: è‡³å°‘ 16GB RAM</li>
<li><strong>ç¡¬ç¢Ÿç©ºé–“</strong>: è‡³å°‘ 50GB å¯ç”¨ç©ºé–“</li>
<li><strong>Docker</strong>: Docker Desktop 24.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li><strong>Docker Compose</strong>: v2.26.1 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
</ul>

<h3>Docker Desktop å®‰è£èˆ‡è¨­å®š</h3>

<h4>1. ä¸‹è¼‰ Docker Desktop</h4>

<p>å‰å¾€ <a href="https://www.docker.com/products/docker-desktop/">Docker å®˜æ–¹ç¶²ç«™</a> ä¸‹è¼‰é©åˆæ‚¨ä½œæ¥­ç³»çµ±çš„ Docker Desktopã€‚</p>

<h4>2. å®‰è£ Docker Desktop</h4>

<ul>
<li><strong>Windows</strong>: åŸ·è¡Œä¸‹è¼‰çš„ <code>.exe</code> æª”æ¡ˆï¼ŒæŒ‰ç…§å®‰è£ç²¾éˆå®Œæˆå®‰è£</li>
<li><strong>macOS</strong>: æ‹–æ›³ Docker.app åˆ°æ‡‰ç”¨ç¨‹å¼è³‡æ–™å¤¾</li>
<li><strong>Linux</strong>: æŒ‰ç…§å®˜æ–¹æ–‡ä»¶é€²è¡Œå®‰è£</li>
</ul>

<h4>3. å•Ÿå‹• Docker Desktop</h4>

<p>å®‰è£å®Œæˆå¾Œï¼Œå•Ÿå‹• Docker Desktop ä¸¦ç­‰å¾…å…¶å®Œå…¨å•Ÿå‹•ï¼ˆç³»çµ±æ‰˜ç›¤åœ–ç¤ºæ‡‰é¡¯ç¤ºç‚ºç¶ è‰²ï¼‰ã€‚</p>

<h4>4. é©—è­‰å®‰è£</h4>

<p>é–‹å•Ÿ PowerShell (Windows) æˆ– Terminal (macOS/Linux)ï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤é©—è­‰å®‰è£ï¼š</p>

<pre><code>docker --version
docker compose version
</code></pre>

<p>æ‡‰è©²çœ‹åˆ°é¡ä¼¼ä»¥ä¸‹è¼¸å‡ºï¼š</p>

<pre><code>Docker version 24.0.0, build xxx
Docker Compose version v2.26.1
</code></pre>

<hr>

<h2>ä¸‹è¼‰èˆ‡è§£å£“ç¸® RAGFlow</h2>

<h3>1. å¾ GitHub ä¸‹è¼‰ RAGFlow</h3>

<p>å‰å¾€ <a href="https://github.com/infiniflow/ragflow">RAGFlow GitHub Repository</a> é é¢ï¼š</p>

<ol>
<li>é»æ“Šç¶ è‰²çš„ <strong>Code</strong> æŒ‰éˆ•</li>
<li>é¸æ“‡ <strong>Download ZIP</strong></li>
<li>å°‡ <code>ragflow-main.zip</code> ä¸‹è¼‰åˆ°æ‚¨çš„é›»è…¦</li>
</ol>

<blockquote><p><strong>æç¤º</strong>: å»ºè­°å°‡æª”æ¡ˆä¸‹è¼‰åˆ°æ¡Œé¢æˆ–å…¶ä»–å®¹æ˜“æ‰¾åˆ°çš„ä½ç½®</p></blockquote>

<h3>2. è§£å£“ç¸®æª”æ¡ˆ</h3>

<p>å°‡ä¸‹è¼‰çš„ <code>ragflow-main.zip</code> è§£å£“ç¸®åˆ°æ‚¨é¸æ“‡çš„ç›®éŒ„ã€‚è§£å£“ç¸®å¾Œï¼Œæ‚¨æœƒçœ‹åˆ°ä»¥ä¸‹ä¸»è¦ç›®éŒ„çµæ§‹ï¼š</p>

<pre><code>ragflow-main/
â”œâ”€â”€ docker/              # Docker ç›¸é—œé…ç½®æª”æ¡ˆï¼ˆé‡è¦ï¼ï¼‰
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â”œâ”€â”€ docker-compose-base.yml
â”‚   â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ web/                 # å‰ç«¯ç¶²é ç•Œé¢
â”œâ”€â”€ api/                 # API ç›¸é—œç¨‹å¼ç¢¼
â”œâ”€â”€ rag/                 # RAG æ ¸å¿ƒé‚è¼¯
â”œâ”€â”€ conf/                # æ‡‰ç”¨ç¨‹å¼é…ç½®
â””â”€â”€ ...
</code></pre>

<h3>3. é€²å…¥ Docker ç›®éŒ„</h3>

<p>ä½¿ç”¨ PowerShell é€²å…¥è§£å£“ç¸®å¾Œçš„ <code>docker</code> ç›®éŒ„ï¼š</p>

<pre><code>cd ~\Desktop\ragflow-main\ragflow-main\docker
</code></pre>

<blockquote><p><strong>é‡è¦</strong>: æ‰€æœ‰å¾ŒçºŒçš„ Docker å‘½ä»¤éƒ½å¿…é ˆåœ¨é€™å€‹ <code>docker</code> ç›®éŒ„ä¸‹åŸ·è¡Œ</p></blockquote>

<hr>

<h2>é…ç½®æª”æ¡ˆä¿®æ”¹è©³è§£</h2>

<p>åœ¨å•Ÿå‹• RAGFlow ä¹‹å‰ï¼Œéœ€è¦ä¿®æ”¹ä¸‰å€‹é—œéµé…ç½®æª”æ¡ˆã€‚ä»¥ä¸‹å°‡è©³ç´°èªªæ˜æ¯å€‹æª”æ¡ˆçš„ä¿®æ”¹å…§å®¹åŠåŸå› ã€‚</p>

<h3>1. `.env` æª”æ¡ˆä¿®æ”¹</h3>

<p><code>.env</code> æª”æ¡ˆåŒ…å« RAGFlow çš„ç’°å¢ƒè®Šæ•¸é…ç½®ã€‚ä»¥ä¸‹æ˜¯éœ€è¦ä¿®æ”¹çš„é—œéµé …ç›®ï¼š</p>

<h4>ä¿®æ”¹é …ç›®ä¸€è¦½è¡¨</h4>

<table>
<thead><tr>
<th>é…ç½®é …</th>
<th>åŸå§‹å€¼</th>
<th>ä¿®æ”¹å¾Œå€¼</th>
<th>èªªæ˜</th>
</tr></thead>
<tbody>
<tr>
<td><code>DOC_ENGINE</code></td>
<td><code>elasticsearch</code></td>
<td><code>infinity</code></td>
<td>æ–‡ä»¶å¼•æ“é¡å‹</td>
</tr>
<tr>
<td><code>DEVICE</code></td>
<td><code>cpu</code></td>
<td><code>gpu</code></td>
<td>é‹ç®—è¨­å‚™é¡å‹</td>
</tr>
<tr>
<td><code>SVR<em>WEB</em>HTTP_PORT</code></td>
<td><code>80</code></td>
<td><code>8100</code></td>
<td>Web HTTP åŸ è™Ÿ</td>
</tr>
<tr>
<td><code>SVR<em>WEB</em>HTTPS_PORT</code></td>
<td><code>443</code></td>
<td><code>1443</code></td>
<td>Web HTTPS åŸ è™Ÿ</td>
</tr>
<tr>
<td><code>COMPOSE_PROFILES</code></td>
<td>è¨»è§£</td>
<td>å•Ÿç”¨ <code>tei-cpu</code></td>
<td>Docker Compose Profile</td>
</tr>
<tr>
<td><code>TEI_MODEL</code></td>
<td><code>Qwen/Qwen3-Embedding-0.6B</code></td>
<td><code>BAAI/bge-large-zh-v1.5</code></td>
<td>å…§åµŒæ¨¡å‹</td>
</tr>
<tr>
<td><code>USE_MINERU</code></td>
<td>è¨»è§£</td>
<td><code>false</code></td>
<td>MinerU åŠŸèƒ½</td>
</tr>
<tr>
<td><code>MINERU<em>DELETE</em>OUTPUT</code></td>
<td>è¨»è§£</td>
<td><code>0</code></td>
<td>MinerU è¼¸å‡ºä¿ç•™</td>
</tr>
<tr>
<td><code>MINERU_BACKEND</code></td>
<td>è¨»è§£</td>
<td><code>pipeline</code></td>
<td>MinerU å¾Œç«¯</td>
</tr>
</tbody></table>

<h4>è©³ç´°ä¿®æ”¹èªªæ˜</h4>

<p>æ‰“é–‹ <code>docker/.env</code> æª”æ¡ˆï¼Œé€²è¡Œä»¥ä¸‹ä¿®æ”¹ï¼š</p>

<h5>1.1 æ–‡ä»¶å¼•æ“è¨­å®š</h5>

<pre><code># åŸå§‹å€¼
DOC_ENGINE=${DOC_ENGINE:-elasticsearch}

# ä¿®æ”¹ç‚º
DOC_ENGINE=${DOC_ENGINE:-infinity}
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: Infinity æ˜¯æ›´æ–°ä¸”æ•ˆèƒ½æ›´å¥½çš„æ–‡ä»¶å¼•æ“ï¼Œæä¾›æ›´å¿«çš„å‘é‡æª¢ç´¢é€Ÿåº¦ã€‚</p>

<h5>1.2 é‹ç®—è¨­å‚™è¨­å®š</h5>

<pre><code># åŸå§‹å€¼
DEVICE=${DEVICE:-cpu}

# ä¿®æ”¹ç‚º
DEVICE=${DEVICE:-gpu}
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li>å¦‚æœæ‚¨çš„é›»è…¦æœ‰ NVIDIA GPU ä¸”å·²å®‰è£ CUDAï¼Œä½¿ç”¨ GPU å¯å¤§å¹…æå‡å…§åµŒæ¨¡å‹å’Œæ¨ç†é€Ÿåº¦</li>
<li>å¦‚æœæ²’æœ‰ GPUï¼Œè«‹ä¿æŒåŸå§‹å€¼ <code>cpu</code></li>
</ul>

<h5>1.3 Web æœå‹™åŸ è™Ÿè¨­å®š</h5>

<pre><code># åŸå§‹å€¼
SVR_WEB_HTTP_PORT=80
SVR_WEB_HTTPS_PORT=443

# ä¿®æ”¹ç‚º
SVR_WEB_HTTP_PORT=8100
SVR_WEB_HTTPS_PORT=1443
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li>é è¨­çš„ 80 å’Œ 443 åŸ å¯èƒ½å·²è¢«å…¶ä»–æœå‹™ä½”ç”¨</li>
<li>ä½¿ç”¨éç‰¹æ¬ŠåŸ  (>1024) å¯é¿å…æ¬Šé™å•é¡Œ</li>
<li>8100 å’Œ 1443 æ˜¯è¼ƒä¸æ˜“è¡çªçš„åŸ è™Ÿ</li>
</ul>

<h5>1.4 å•Ÿç”¨ TEI CPU Profile</h5>

<pre><code># åŸå§‹å€¼ï¼ˆè¢«è¨»è§£ï¼‰
# COMPOSE_PROFILES=${COMPOSE_PROFILES},tei-cpu

# ä¿®æ”¹ç‚º
COMPOSE_PROFILES=${COMPOSE_PROFILES},tei-cpu
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li>å•Ÿç”¨ Text Embeddings Inference (TEI) CPU æœå‹™</li>
<li>v0.22 ä¹‹å¾Œç‰ˆæœ¬éœ€è¦æ˜ç¢ºå•Ÿç”¨æ­¤ profile æ‰èƒ½ä½¿ç”¨å…§åµŒæ¨¡å‹</li>
<li>å¦‚æœä½¿ç”¨ GPUï¼Œä¹Ÿå¯ä»¥å•Ÿç”¨ <code>tei-gpu</code> æ›¿ä»£</li>
</ul>

<h5>1.5 å…§åµŒæ¨¡å‹è¨­å®š â­ é‡è¦</h5>

<pre><code># åŸå§‹å€¼
TEI_MODEL=${TEI_MODEL:-Qwen/Qwen3-Embedding-0.6B}

# ä¿®æ”¹ç‚º
#TEI_MODEL=BAAI/bge-large-zh-v1.5
TEI_MODEL=BAAI/bge-large-zh-v1.5
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li><strong>v0.22 ä¹‹å¾Œçš„é‡è¦è®Šæ›´</strong>: RAGFlow ä¸å†é è¨­åŒ…å«å…§åµŒæ¨¡å‹</li>
<li>BAAI/bge-large-zh-v1.5 æ˜¯é‡å°ä¸­æ–‡å„ªåŒ–çš„é«˜å“è³ªå…§åµŒæ¨¡å‹</li>
<li>æ¨¡å‹ç¶­åº¦ç‚º 1024ï¼Œé©åˆä¸­æ–‡æ–‡æª”çš„èªç¾©ç†è§£</li>
<li>ç¬¬ä¸€æ¬¡å•Ÿå‹•æ™‚æœƒè‡ªå‹•ä¸‹è¼‰æ­¤æ¨¡å‹ï¼ˆç´„ 1.3GBï¼‰</li>
</ul>

<blockquote><p><strong>æ³¨æ„</strong>: å¦‚æœæ‚¨ä¸»è¦è™•ç†è‹±æ–‡æ–‡æª”ï¼Œå¯ä»¥ä½¿ç”¨ <code>BAAI/bge-large-en-v1.5</code> æˆ–ä¿æŒé è¨­çš„ <code>Qwen/Qwen3-Embedding-0.6B</code></p></blockquote>

<h5>1.6 MinerU é…ç½®ï¼ˆå¯é¸ï¼‰</h5>

<pre><code># å•Ÿç”¨ MinerUï¼ˆé«˜å“è³ª PDF è§£æå·¥å…·ï¼‰
USE_MINERU=false
MINERU_EXECUTABLE="$HOME/uv_tools/.venv/bin/mineru"
MINERU_DELETE_OUTPUT=0   # ä¿ç•™è¼¸å‡ºç›®éŒ„
MINERU_BACKEND=pipeline  # ä½¿ç”¨ pipeline å¾Œç«¯
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li>MinerU æä¾›æ›´ç²¾ç¢ºçš„ PDF æ–‡æª”è§£æ</li>
<li><code>MINERU<em>DELETE</em>OUTPUT=0</code> ä¿ç•™ä¸­é–“è¼¸å‡ºï¼Œä¾¿æ–¼é™¤éŒ¯</li>
<li>å¦‚æœä¸éœ€è¦å¯ä¿æŒé è¨­è¨»è§£ç‹€æ…‹</li>
</ul>

<hr>

<h3>2. `docker-compose.yml` æª”æ¡ˆä¿®æ”¹</h3>

<p><code>docker-compose.yml</code> å®šç¾©äº† RAGFlow çš„æœå‹™å®¹å™¨é…ç½®ã€‚</p>

<h4>ä¿®æ”¹é …ç›®ä¸€è¦½è¡¨</h4>

<table>
<thead><tr>
<th>æœå‹™</th>
<th>é…ç½®é …</th>
<th>åŸå§‹å€¼</th>
<th>ä¿®æ”¹å¾Œå€¼</th>
<th>èªªæ˜</th>
</tr></thead>
<tbody>
<tr>
<td><code>ragflow-server</code></td>
<td><code>restart</code></td>
<td><code>unless-stopped</code></td>
<td><code>on-failure</code></td>
<td>é‡å•Ÿç­–ç•¥</td>
</tr>
<tr>
<td><code>ragflow-server</code></td>
<td><code>command</code></td>
<td>è¨»è§£</td>
<td>å•Ÿç”¨ adminserver</td>
<td>ç®¡ç†ä¼ºæœå™¨</td>
</tr>
<tr>
<td><code>ragflow-server</code></td>
<td><code>command</code></td>
<td>è¨»è§£</td>
<td>å•Ÿç”¨ mcpserver</td>
<td>MCP ä¼ºæœå™¨</td>
</tr>
</tbody></table>

<h4>è©³ç´°ä¿®æ”¹èªªæ˜</h4>

<p>æ‰“é–‹ <code>docker/docker-compose.yml</code> æª”æ¡ˆï¼š</p>

<h5>2.1 å•Ÿç”¨ Admin Server</h5>

<pre><code># åœ¨ ragflow-server æœå‹™çš„ command å€æ®µ
# åŸå§‹å€¼ï¼ˆè¢«è¨»è§£ï¼‰
# Example configuration to start Admin server:
#   - --enable-adminserver

# ä¿®æ”¹ç‚º
# Example configration to start Admin server:
    #   - --enable-adminserver
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li>Admin Server æä¾›ç³»çµ±ç®¡ç†ç•Œé¢</li>
<li>å¯ä»¥ç›£æ§ç³»çµ±ç‹€æ…‹ã€ç®¡ç†ç”¨æˆ¶æ¬Šé™ç­‰</li>
<li>æ ¹æ“šéœ€æ±‚æ±ºå®šæ˜¯å¦å•Ÿç”¨</li>
</ul>

<h5>2.2 å•Ÿç”¨ MCP Server</h5>

<pre><code># åŸå§‹å€¼ï¼ˆè¢«è¨»è§£ï¼‰
#   - --enable-mcpserver
#   - --mcp-host=0.0.0.0
#   - --mcp-port=9382
#   - --mcp-base-url=http://127.0.0.1:9380
#   - --mcp-script-path=/ragflow/mcp/server/server.py
#   - --mcp-mode=self-host
#   - --mcp-host-api-key=ragflow-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ä¿®æ”¹ç‚ºï¼ˆå–æ¶ˆè¨»è§£ï¼‰
      - --enable-mcpserver
      - --mcp-host=0.0.0.0
      - --mcp-port=9382
      - --mcp-base-url=http://127.0.0.1:9380
      - --mcp-script-path=/ragflow/mcp/server/server.py
      - --mcp-mode=self-host
      - --mcp-host-api-key=ragflow-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li>MCP (Model Context Protocol) Server æä¾›å¤–éƒ¨æ•´åˆä»‹é¢</li>
<li>å…è¨±èˆ‡å…¶ä»–æ‡‰ç”¨ç¨‹å¼é€²è¡Œé€šè¨Š</li>
<li>é©åˆéœ€è¦ API æ•´åˆçš„å ´æ™¯</li>
</ul>

<h5>2.3 ä¿®æ”¹é‡å•Ÿç­–ç•¥</h5>

<pre><code># æ‰€æœ‰æœå‹™çš„ restart è¨­å®š
# åŸå§‹å€¼
    restart: unless-stopped

# ä¿®æ”¹ç‚º
    restart: on-failure
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li><code>on-failure</code>: åªåœ¨å®¹å™¨ç•°å¸¸é€€å‡ºæ™‚é‡å•Ÿ</li>
<li><code>unless-stopped</code>: é™¤éæ‰‹å‹•åœæ­¢ï¼Œå¦å‰‡ä¸€ç›´é‡å•Ÿ</li>
<li><code>on-failure</code> æ›´é©åˆé–‹ç™¼æ¸¬è©¦ç’°å¢ƒï¼Œé¿å…å•é¡Œå®¹å™¨æŒçºŒé‡å•Ÿ</li>
</ul>

<hr>

<h3>3. `docker-compose-base.yml` æª”æ¡ˆä¿®æ”¹</h3>

<p><code>docker-compose-base.yml</code> å®šç¾©äº† RAGFlow åº•å±¤æœå‹™çš„è©³ç´°é…ç½®ã€‚</p>

<h4>ä¿®æ”¹é …ç›®ä¸€è¦½è¡¨</h4>

<table>
<thead><tr>
<th>æœå‹™</th>
<th>é…ç½®é …</th>
<th>åŸå§‹å€¼</th>
<th>ä¿®æ”¹å¾Œå€¼</th>
<th>èªªæ˜</th>
</tr></thead>
<tbody>
<tr>
<td>æ‰€æœ‰æœå‹™</td>
<td><code>restart</code></td>
<td><code>unless-stopped</code></td>
<td><code>on-failure</code></td>
<td>é‡å•Ÿç­–ç•¥</td>
</tr>
<tr>
<td><code>infinity</code></td>
<td><code>image</code></td>
<td><code>v0.6.11</code></td>
<td><code>v0.6.7</code></td>
<td>Infinity ç‰ˆæœ¬</td>
</tr>
<tr>
<td><code>tei-cpu/gpu</code></td>
<td><code>command</code></td>
<td><code>/data/${TEI_MODEL}</code></td>
<td><code>${TEI_MODEL}</code></td>
<td>æ¨¡å‹è·¯å¾‘</td>
</tr>
</tbody></table>

<h4>è©³ç´°ä¿®æ”¹èªªæ˜</h4>

<p>æ‰“é–‹ <code>docker/docker-compose-base.yml</code> æª”æ¡ˆï¼š</p>

<h5>3.1 ä¿®æ”¹æ‰€æœ‰æœå‹™çš„é‡å•Ÿç­–ç•¥</h5>

<pre><code># ç¯„ä¾‹ï¼šä»¥ es æœå‹™ç‚ºä¾‹
es:
  image: docker.elastic.co/elasticsearch/elasticsearch:8.11.3
  # åŸå§‹å€¼
  restart: unless-stopped
  
  # ä¿®æ”¹ç‚º
  restart: on-failure
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: èˆ‡ <code>docker-compose.yml</code> ç›¸åŒï¼Œçµ±ä¸€ä½¿ç”¨ <code>on-failure</code> ç­–ç•¥ã€‚</p>

<h5>3.2 ä¿®æ”¹ Infinity ç‰ˆæœ¬</h5>

<pre><code>infinity:
  # åŸå§‹å€¼
  image: infiniflow/infinity:v0.6.11
  
  # ä¿®æ”¹ç‚º
  image: infiniflow/infinity:v0.6.7
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li>v0.6.7 æ˜¯ç¶“éå……åˆ†æ¸¬è©¦çš„ç©©å®šç‰ˆæœ¬</li>
<li>v0.6.11 å¯èƒ½å­˜åœ¨ç›¸å®¹æ€§å•é¡Œ</li>
<li>å¦‚é‡åˆ°å•é¡Œå¯å˜—è©¦å›é€€ç‰ˆæœ¬</li>
</ul>

<h5>3.3 ä¿®æ”¹ TEI æ¨¡å‹åŠ è¼‰è·¯å¾‘ â­ é‡è¦</h5>

<pre><code># tei-cpu æœå‹™
tei-cpu:
  # åŸå§‹å€¼
  command: ["--model-id", "/data/${TEI_MODEL}", "--auto-truncate"]
  
  # ä¿®æ”¹ç‚º
  command: ["--model-id", "${TEI_MODEL}", "--auto-truncate"]

# tei-gpu æœå‹™ï¼ˆå¦‚æœä½¿ç”¨ GPUï¼‰
tei-gpu:
  # åŸå§‹å€¼
  command: ["--model-id", "/data/${TEI_MODEL}", "--auto-truncate"]
  
  # ä¿®æ”¹ç‚º
  command: ["--model-id", "${TEI_MODEL}", "--auto-truncate"]
</code></pre>

<p><strong>ä¿®æ”¹åŸå› </strong>: </p>
<ul>
<li><strong>v0.22 çš„é—œéµè®Šæ›´</strong>: TEI å®¹å™¨æœƒè‡ªå‹•å¾ HuggingFace ä¸‹è¼‰æ¨¡å‹</li>
<li>ä¸å†éœ€è¦é å…ˆæ›è¼‰æœ¬åœ°æ¨¡å‹ç›®éŒ„ <code>/data</code></li>
<li>ç›´æ¥ä½¿ç”¨æ¨¡å‹ IDï¼ˆå¦‚ <code>BAAI/bge-large-zh-v1.5</code>ï¼‰å³å¯</li>
<li>é¦–æ¬¡å•Ÿå‹•æ™‚æœƒè‡ªå‹•ä¸‹è¼‰åˆ°å®¹å™¨å…§éƒ¨</li>
</ul>

<hr>

<h2>å…§åµŒæ¨¡å‹é…ç½®</h2>

<h3>v0.22 ä¹‹å¾Œçš„é‡è¦è®Šæ›´</h3>

<p>å¾ RAGFlow v0.22 é–‹å§‹ï¼ŒDocker æ˜ åƒæª”æ¡ç”¨ "slim" ç‰ˆæœ¬ï¼Œä¸å†é å…ˆåŒ…å«å…§åµŒæ¨¡å‹ã€‚é€™æ„å‘³è‘—ï¼š</p>

<ol>
<li><strong>æ˜ åƒæª”æ›´å°</strong>: åŸºç¤æ˜ åƒæª”å¾æ•¸ GB æ¸›å°‘åˆ°ç´„ 1GB</li>
<li><strong>æŒ‰éœ€ä¸‹è¼‰</strong>: é¦–æ¬¡å•Ÿå‹•æ™‚æ‰ä¸‹è¼‰æ‚¨æŒ‡å®šçš„æ¨¡å‹</li>
<li><strong>éˆæ´»é…ç½®</strong>: å¯ä»¥è¼•é¬†åˆ‡æ›ä¸åŒçš„å…§åµŒæ¨¡å‹</li>
</ol>

<h3>BAAI/bge-large-zh-v1.5 æ¨¡å‹ç°¡ä»‹</h3>

<p><strong>BAAI/bge-large-zh-v1.5</strong> æ˜¯ç”±åŒ—äº¬æ™ºæºäººå·¥æ™ºèƒ½ç ”ç©¶é™¢ (BAAI) é–‹ç™¼çš„ä¸­æ–‡å…§åµŒæ¨¡å‹ï¼š</p>

<ul>
<li><strong>æ¨¡å‹å¤§å°</strong>: ç´„ 1.3GB</li>
<li><strong>å‘é‡ç¶­åº¦</strong>: 1024 ç¶­</li>
<li><strong>èªè¨€æ”¯æ´</strong>: ä¸»è¦é‡å°ä¸­æ–‡å„ªåŒ–ï¼Œä¹Ÿæ”¯æŒè‹±æ–‡</li>
<li><strong>é©ç”¨å ´æ™¯</strong>: </li>
</ul>
<p>  - ä¸­æ–‡æ–‡æª”æª¢ç´¢</p>
<p>  - èªç¾©ç›¸ä¼¼åº¦è¨ˆç®—</p>
<p>  - RAG (Retrieval-Augmented Generation) æ‡‰ç”¨</p>

<h3>æ¨¡å‹ä¸‹è¼‰æµç¨‹</h3>

<p>ç•¶æ‚¨é¦–æ¬¡å•Ÿå‹• RAGFlow æ™‚ï¼ŒTEI æœå‹™æœƒè‡ªå‹•åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š</p>

<ol>
<li><strong>æª¢æŸ¥æ¨¡å‹</strong>: æª¢æŸ¥å®¹å™¨å…§æ˜¯å¦å·²å­˜åœ¨æŒ‡å®šçš„æ¨¡å‹</li>
<li><strong>é€£æ¥ HuggingFace</strong>: é€£æ¥åˆ° HuggingFace Model Hub</li>
<li><strong>ä¸‹è¼‰æ¨¡å‹</strong>: ä¸‹è¼‰ <code>BAAI/bge-large-zh-v1.5</code> æ¨¡å‹æª”æ¡ˆï¼ˆç´„ 1.3GBï¼‰</li>
<li><strong>åŠ è¼‰æ¨¡å‹</strong>: å°‡æ¨¡å‹åŠ è¼‰åˆ°è¨˜æ†¶é«”ä¸­</li>
<li><strong>å•Ÿå‹•æœå‹™</strong>: TEI æœå‹™æº–å‚™å°±ç·’ï¼Œå¯æ¥å—å…§åµŒè«‹æ±‚</li>
</ol>

<blockquote><p><strong>æ³¨æ„</strong>: é¦–æ¬¡ä¸‹è¼‰å¯èƒ½éœ€è¦ 10-30 åˆ†é˜ï¼Œå–æ±ºæ–¼æ‚¨çš„ç¶²è·¯é€Ÿåº¦ã€‚è«‹è€å¿ƒç­‰å¾…ã€‚</p></blockquote>

<h3>åŠ é€Ÿä¸‹è¼‰ï¼ˆå¯é¸ï¼‰</h3>

<p>å¦‚æœæ‚¨åœ¨ä¸­åœ‹å¤§é™¸æˆ–ç¶²è·¯é€£ç·šä¸ç©©å®šï¼Œå¯ä»¥è€ƒæ…®ï¼š</p>

<h4>æ–¹æ³•ä¸€: ä½¿ç”¨ HuggingFace é¡åƒç«™</h4>

<p>ä¿®æ”¹ <code>docker-compose-base.yml</code> ä¸­çš„ç’°å¢ƒè®Šæ•¸ï¼š</p>

<pre><code>tei-cpu:
  environment:
    - HF_ENDPOINT=https://hf-mirror.com  # ä½¿ç”¨é¡åƒç«™
</code></pre>

<h4>æ–¹æ³•äºŒ: é å…ˆä¸‹è¼‰æ¨¡å‹åˆ°æœ¬åœ°</h4>

<p>å¦‚æœæ‚¨æƒ³å®Œå…¨é›¢ç·šéƒ¨ç½²ï¼š</p>

<ol>
<li>æ‰‹å‹•å¾ <a href="https://huggingface.co/BAAI/bge-large-zh-v1.5">HuggingFace</a> ä¸‹è¼‰æ¨¡å‹</li>
<li>å°‡æ¨¡å‹æ”¾ç½®åœ¨æœ¬åœ°ç›®éŒ„ï¼ˆå¦‚ <code>./models/bge-large-zh-v1.5/</code>ï¼‰</li>
<li>åœ¨ <code>docker-compose-base.yml</code> ä¸­æ›è¼‰ç›®éŒ„ï¼š</li>
</ol>

<pre><code>tei-cpu:
  volumes:
    - ./models:/data
  command: ["--model-id", "/data/bge-large-zh-v1.5", "--auto-truncate"]
</code></pre>

<hr>

<h2>å•Ÿå‹• RAGFlow</h2>

<p>å®Œæˆæ‰€æœ‰é…ç½®ä¿®æ”¹å¾Œï¼Œå³å¯å•Ÿå‹• RAGFlowã€‚</p>

<h3>å•Ÿå‹•å‘½ä»¤</h3>

<p>åœ¨ <code>docker</code> ç›®éŒ„ä¸‹ï¼ŒåŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>

<pre><code>docker compose up -d
</code></pre>

<p><strong>åƒæ•¸èªªæ˜</strong>:</p>
<ul>
<li><code>docker compose</code>: Docker Compose v2 å‘½ä»¤ï¼ˆèˆŠç‰ˆç‚º <code>docker-compose</code>ï¼‰</li>
<li><code>up</code>: å•Ÿå‹•æœå‹™</li>
<li><code>-d</code>: ä»¥èƒŒæ™¯æ¨¡å¼é‹è¡Œï¼ˆdetached modeï¼‰</li>
</ul>

<h3>å•Ÿå‹•éç¨‹</h3>

<p>åŸ·è¡Œå‘½ä»¤å¾Œï¼Œæ‚¨æœƒçœ‹åˆ°é¡ä¼¼ä»¥ä¸‹è¼¸å‡ºï¼š</p>

<pre><code>[+] Running 10/10
 âœ” Network ragflow_ragflow        Created
 âœ” Container ragflow-mysql        Started
 âœ” Container ragflow-redis        Started
 âœ” Container ragflow-es           Started
 âœ” Container ragflow-infinity     Started
 âœ” Container ragflow-tei-cpu      Starting...
 âœ” Container ragflow-minio        Started
 âœ” Container ragflow-server       Started
</code></pre>

<h3>æª¢æŸ¥å®¹å™¨ç‹€æ…‹</h3>

<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æª¢æŸ¥æ‰€æœ‰å®¹å™¨æ˜¯å¦æ­£å¸¸é‹è¡Œï¼š</p>

<pre><code>docker compose ps
</code></pre>

<p>æ‰€æœ‰å®¹å™¨çš„ STATUS æ‡‰è©²é¡¯ç¤ºç‚º <code>Up</code> æˆ– <code>Up (healthy)</code>ï¼Œä¾‹å¦‚ï¼š</p>

<pre><code>NAME                  STATUS
ragflow-mysql         Up (healthy)
ragflow-redis         Up (healthy)
ragflow-es            Up
ragflow-infinity      Up
ragflow-tei-cpu       Up
ragflow-minio         Up (healthy)
ragflow-server        Up
</code></pre>

<h3>æŸ¥çœ‹æ—¥èªŒ</h3>

<h4>æŸ¥çœ‹æ‰€æœ‰æœå‹™æ—¥èªŒ</h4>

<pre><code>docker compose logs -f
</code></pre>

<h4>æŸ¥çœ‹ç‰¹å®šæœå‹™æ—¥èªŒ</h4>

<pre><code># æŸ¥çœ‹ RAGFlow ä¸»æœå‹™æ—¥èªŒ
docker compose logs -f ragflow-server

# æŸ¥çœ‹ TEI æœå‹™æ—¥èªŒï¼ˆå…§åµŒæ¨¡å‹ï¼‰
docker compose logs -f tei-cpu

# æŸ¥çœ‹ Infinity æ—¥èªŒ
docker compose logs -f infinity
</code></pre>

<h3>é¦–æ¬¡å•Ÿå‹•æ³¨æ„äº‹é …</h3>

<p><strong>é¦–æ¬¡å•Ÿå‹•æ™‚ï¼Œè«‹ç‰¹åˆ¥é—œæ³¨ <code>tei-cpu</code> æœå‹™çš„æ—¥èªŒ</strong>ï¼š</p>

<pre><code>docker compose logs -f tei-cpu
</code></pre>

<p>æ‚¨æ‡‰è©²æœƒçœ‹åˆ°æ¨¡å‹ä¸‹è¼‰çš„é€²åº¦è¨Šæ¯ï¼š</p>

<pre><code>Downloading model BAAI/bge-large-zh-v1.5...
Downloading (1/5): config.json
Downloading (2/5): model.safetensors
Downloading (3/5): tokenizer.json
...
Model loaded successfully
Server is ready to accept connections
</code></pre>

<blockquote><p><strong>æ³¨æ„</strong>: æ¨¡å‹ä¸‹è¼‰æœŸé–“ï¼Œtei-cpu å®¹å™¨å¯èƒ½æœƒé¡¯ç¤º <code>Restarting</code> ç‹€æ…‹ï¼Œé€™æ˜¯æ­£å¸¸ç¾è±¡ã€‚ç­‰å¾…ä¸‹è¼‰å®Œæˆå¾Œï¼Œå®¹å™¨æœƒç©©å®šåœ¨ <code>Up</code> ç‹€æ…‹ã€‚</p></blockquote>

<hr>

<h2>é¦–æ¬¡ç™»å…¥èˆ‡è¨­å®š</h2>

<h3>è¨ªå• RAGFlow Web ç•Œé¢</h3>

<p>æ¨¡å‹ä¸‹è¼‰å®Œæˆä¸”æ‰€æœ‰æœå‹™æ­£å¸¸é‹è¡Œå¾Œï¼Œå³å¯è¨ªå• RAGFlowï¼š</p>

<ol>
<li>æ‰“é–‹ç€è¦½å™¨</li>
<li>å‰å¾€: <code>http://localhost:8100</code></li>
<li>å¦‚æœä¿®æ”¹äº† <code>SVR<em>WEB</em>HTTP_PORT</code>ï¼Œè«‹ä½¿ç”¨æ‚¨è¨­å®šçš„åŸ è™Ÿ</li>
</ol>

<h3>é¦–æ¬¡ç™»å…¥</h3>

<p>RAGFlow é è¨­ç®¡ç†å“¡å¸³è™Ÿï¼š</p>

<ul>
<li><strong>ä½¿ç”¨è€…åç¨±</strong>: <code>admin</code></li>
<li><strong>å¯†ç¢¼</strong>: <code>admin</code></li>
</ul>

<blockquote><p><strong>å®‰å…¨æç¤º</strong>: é¦–æ¬¡ç™»å…¥å¾Œï¼Œè«‹ç«‹å³ä¿®æ”¹é è¨­å¯†ç¢¼ï¼</p></blockquote>

<h3>é…ç½®å…§åµŒæ¨¡å‹</h3>

<p>ç™»å…¥å¾Œï¼Œéœ€è¦åœ¨ RAGFlow ç•Œé¢ä¸­é…ç½®å…§åµŒæ¨¡å‹ï¼š</p>

<h4>æ­¥é©Ÿ 1: é€²å…¥æ¨¡å‹æä¾›å•†è¨­å®š</h4>

<ol>
<li>é»æ“Šå³ä¸Šè§’çš„å€‹äººé ­åƒ</li>
<li>é¸æ“‡ <strong>Model Providers</strong>ï¼ˆæ¨¡å‹æä¾›å•†ï¼‰</li>
</ol>

<h4>æ­¥é©Ÿ 2: æ·»åŠ  TEI å…§åµŒæ¨¡å‹</h4>

<ol>
<li>é»æ“Š <strong>Add LLM</strong> æŒ‰éˆ•</li>
<li>å¡«å¯«ä»¥ä¸‹è³‡è¨Šï¼š</li>
</ol>
<p>   - <strong>Model Type</strong>: é¸æ“‡ <code>Embedding</code></p>
<p>   - <strong>Model Name</strong>: <code>bge-large-zh-v1.5</code></p>
<p>   - <strong>Base URL</strong>: <code>http://tei-cpu:8080</code>ï¼ˆå¦‚æœä½¿ç”¨ GPUï¼Œå‰‡ç‚º <code>http://tei-gpu:8080</code>ï¼‰</p>
<p>   - <strong>API Key</strong>: ç•™ç©ºï¼ˆæœ¬åœ°éƒ¨ç½²ä¸éœ€è¦ï¼‰</p>
<ol>
<li>é»æ“Š <strong>Save</strong> å„²å­˜</li>
</ol>

<h4>æ­¥é©Ÿ 3: è¨­å®šé è¨­å…§åµŒæ¨¡å‹</h4>

<ol>
<li>è¿”å›å€‹äººé ­åƒé¸å–®</li>
<li>é¸æ“‡ <strong>System Model Settings</strong>ï¼ˆç³»çµ±æ¨¡å‹è¨­å®šï¼‰</li>
<li>åœ¨ <strong>Embedding Model</strong> ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡ <code>bge-large-zh-v1.5</code></li>
<li>é»æ“Š <strong>Save</strong> å„²å­˜</li>
</ol>

<h3>é…ç½® LLMï¼ˆå¤§å‹èªè¨€æ¨¡å‹ï¼‰</h3>

<p>RAGFlow é‚„éœ€è¦é…ç½® LLM ä¾†ç”Ÿæˆå›ç­”ã€‚æ‚¨å¯ä»¥é¸æ“‡ï¼š</p>

<h4>é¸é … 1: ä½¿ç”¨æœ¬åœ° LLMï¼ˆOllamaï¼‰</h4>

<ol>
<li>å®‰è£ <a href="https://ollama.ai/">Ollama</a></li>
<li>ä¸‹è¼‰æ¨¡å‹ï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<p>   ```powershell</p>
<p>   ollama pull qwen2.5:7b</p>
<p>   ```</p>
<ol>
<li>åœ¨ RAGFlow çš„ <strong>Model Providers</strong> ä¸­æ·»åŠ  Ollamaï¼š</li>
</ol>
<p>   - <strong>Provider Type</strong>: Ollama</p>
<p>   - <strong>Base URL</strong>: <code>http://host.docker.internal:11434</code></p>
<p>   - <strong>Model Name</strong>: <code>qwen2.5:7b</code></p>

<h4>é¸é … 2: ä½¿ç”¨é›²ç«¯ API</h4>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ OpenAIã€Azure OpenAIã€Google Gemini ç­‰é›²ç«¯æœå‹™çš„ APIã€‚</p>

<hr>

<h2>é©—è­‰èˆ‡æ¸¬è©¦</h2>

<h3>é©—è­‰å…§åµŒæ¨¡å‹</h3>

<h4>æ¸¬è©¦ TEI æœå‹™</h4>

<p>ä½¿ç”¨ curl æˆ– PowerShell æ¸¬è©¦ TEI æœå‹™æ˜¯å¦æ­£å¸¸ï¼š</p>

<pre><code>curl -X POST http://localhost:8080/embed `
  -H "Content-Type: application/json" `
  -d '{"inputs": "æ¸¬è©¦æ–‡æœ¬"}'
</code></pre>

<p>å¦‚æœè¿”å›åŒ…å«å‘é‡çš„ JSON å›æ‡‰ï¼Œè¡¨ç¤ºå…§åµŒæ¨¡å‹å·¥ä½œæ­£å¸¸ã€‚</p>

<h3>å»ºç«‹æ¸¬è©¦çŸ¥è­˜åº«</h3>

<h4>æ­¥é©Ÿ 1: å»ºç«‹çŸ¥è­˜åº«</h4>

<ol>
<li>åœ¨ RAGFlow é¦–é é»æ“Š <strong>Datasets</strong>ï¼ˆè³‡æ–™é›†ï¼‰</li>
<li>é»æ“Š <strong>Create Dataset</strong>ï¼ˆå»ºç«‹è³‡æ–™é›†ï¼‰</li>
<li>å¡«å¯«è³‡æ–™é›†åç¨±ï¼Œä¾‹å¦‚ "æ¸¬è©¦çŸ¥è­˜åº«"</li>
<li><strong>é‡è¦</strong>: é¸æ“‡ <strong>Embedding Model</strong> ç‚º <code>bge-large-zh-v1.5</code></li>
<li>é¸æ“‡ <strong>Chunking Method</strong>ï¼ˆåˆ†å¡Šæ–¹æ³•ï¼‰ï¼Œæ¨è–¦ä½¿ç”¨ <code>General</code></li>
<li>é»æ“Š <strong>Create</strong> å»ºç«‹</li>
</ol>

<blockquote><p><strong>æ³¨æ„</strong>: ä¸€æ—¦é¸å®šå…§åµŒæ¨¡å‹ä¸¦ä¸Šå‚³æ–‡ä»¶ï¼Œè©²è³‡æ–™é›†çš„å…§åµŒæ¨¡å‹å°±ç„¡æ³•æ›´æ”¹ï¼</p></blockquote>

<h4>æ­¥é©Ÿ 2: ä¸Šå‚³æ¸¬è©¦æ–‡ä»¶</h4>

<ol>
<li>é€²å…¥å‰›å»ºç«‹çš„è³‡æ–™é›†</li>
<li>é»æ“Š <strong>Upload</strong> æŒ‰éˆ•</li>
<li>é¸æ“‡ä¸€å€‹æ¸¬è©¦æ–‡ä»¶ï¼ˆæ”¯æ´ PDFã€DOCXã€TXTã€Markdown ç­‰æ ¼å¼ï¼‰</li>
<li>ä¸Šå‚³å¾Œï¼Œé»æ“Š <strong>Parse</strong>ï¼ˆè§£æï¼‰æŒ‰éˆ•</li>
<li>ç­‰å¾…æ–‡ä»¶è§£æå®Œæˆï¼ˆå¯åœ¨ <strong>Files</strong> é é¢æŸ¥çœ‹é€²åº¦ï¼‰</li>
</ol>

<h4>æ­¥é©Ÿ 3: å»ºç«‹å°è©±</h4>

<ol>
<li>é»æ“Šå·¦å´é¸å–®çš„ <strong>Chat</strong>ï¼ˆå°è©±ï¼‰</li>
<li>é»æ“Š <strong>Create Assistant</strong>ï¼ˆå»ºç«‹åŠ©æ‰‹ï¼‰</li>
<li>é¸æ“‡å‰›æ‰å»ºç«‹çš„è³‡æ–™é›†</li>
<li>é¸æ“‡ LLM æ¨¡å‹</li>
<li>é–‹å§‹æ¸¬è©¦å°è©±ï¼</li>
</ol>

<h3>æ¸¬è©¦å•ç­”</h3>

<p>åœ¨å°è©±æ¡†ä¸­è¼¸å…¥èˆ‡ä¸Šå‚³æ–‡ä»¶ç›¸é—œçš„å•é¡Œï¼Œä¾‹å¦‚ï¼š</p>

<pre><code>å•ï¼š[æ‚¨ä¸Šå‚³æ–‡ä»¶çš„ç›¸é—œå•é¡Œ]
</code></pre>

<p>å¦‚æœç³»çµ±èƒ½å¤ æ­£ç¢ºå¼•ç”¨æ–‡ä»¶å…§å®¹ä¸¦ç”Ÿæˆå›ç­”ï¼Œè¡¨ç¤º RAGFlow å®‰è£æˆåŠŸä¸”é‹ä½œæ­£å¸¸ï¼</p>

<hr>

<h2>å¸¸è¦‹å•é¡Œèˆ‡ç–‘é›£æ’è§£</h2>

<h3>Q1: TEI å®¹å™¨æŒçºŒé‡å•Ÿ</h3>

<p><strong>åŸå› </strong>: æ¨¡å‹ä¸‹è¼‰æœªå®Œæˆæˆ–ä¸‹è¼‰å¤±æ•—</p>

<p><strong>è§£æ±ºæ–¹æ³•</strong>:</p>
<ol>
<li>æŸ¥çœ‹ TEI å®¹å™¨æ—¥èªŒï¼š</li>
</ol>
<p>   ```powershell</p>
<p>   docker compose logs -f tei-cpu</p>
<p>   ```</p>
<ol>
<li>å¦‚æœæ˜¯ç¶²è·¯å•é¡Œï¼Œå¯ä»¥ä½¿ç”¨ HuggingFace é¡åƒç«™ï¼ˆåƒè€ƒå‰æ–‡ï¼‰</li>
<li>ç­‰å¾…æ¨¡å‹å®Œå…¨ä¸‹è¼‰å®Œæˆï¼ˆå¯èƒ½éœ€è¦ 10-30 åˆ†é˜ï¼‰</li>
</ol>

<h3>Q2: ç„¡æ³•è¨ªå• Web ç•Œé¢</h3>

<p><strong>å¯èƒ½åŸå› </strong>:</p>
<ul>
<li>åŸ è™Ÿè¡çª</li>
<li>å®¹å™¨æœªæ­£å¸¸å•Ÿå‹•</li>
</ul>

<p><strong>è§£æ±ºæ–¹æ³•</strong>:</p>
<ol>
<li>æª¢æŸ¥åŸ è™Ÿæ˜¯å¦è¢«ä½”ç”¨ï¼š</li>
</ol>
<p>   ```powershell</p>
<table>
<thead><tr>
</tr></thead>
<tbody>
</tbody></table>
<p>   ```</p>
<ol>
<li>ç¢ºèªæ‰€æœ‰å®¹å™¨éƒ½åœ¨é‹è¡Œï¼š</li>
</ol>
<p>   ```powershell</p>
<p>   docker compose ps</p>
<p>   ```</p>
<ol>
<li>æª¢æŸ¥ ragflow-server æ—¥èªŒï¼š</li>
</ol>
<p>   ```powershell</p>
<p>   docker compose logs -f ragflow-server</p>
<p>   ```</p>

<h3>Q3: è¨˜æ†¶é«”ä¸è¶³</h3>

<p><strong>åŸå› </strong>: é‹è¡Œæ‰€æœ‰æœå‹™éœ€è¦å¤§é‡è¨˜æ†¶é«”</p>

<p><strong>è§£æ±ºæ–¹æ³•</strong>:</p>
<ol>
<li>é—œé–‰ä¸å¿…è¦çš„æ‡‰ç”¨ç¨‹å¼</li>
<li>å¢åŠ  Docker Desktop çš„è¨˜æ†¶é«”é™åˆ¶ï¼š</li>
</ol>
<p>   - æ‰“é–‹ Docker Desktop â†’ Settings â†’ Resources</p>
<p>   - å¢åŠ  Memory è‡³è‡³å°‘ 8GB</p>
<ol>
<li>å¦‚æœä»ä¸è¶³ï¼Œè€ƒæ…®ä½¿ç”¨ CPU ç‰ˆæœ¬æ›¿ä»£ GPU ç‰ˆæœ¬</li>
</ol>

<h3>Q4: æ¨¡å‹ä¸‹è¼‰é€Ÿåº¦æ…¢</h3>

<p><strong>è§£æ±ºæ–¹æ³•</strong>:</p>
<ul>
<li>ä½¿ç”¨ HuggingFace é¡åƒç«™ï¼ˆä¸­åœ‹å¤§é™¸ç”¨æˆ¶ï¼‰</li>
<li>æˆ–é å…ˆä¸‹è¼‰æ¨¡å‹åˆ°æœ¬åœ°ä¸¦æ›è¼‰ï¼ˆåƒè€ƒå‰æ–‡ï¼‰</li>
</ul>

<h3>Q5: æ–‡ä»¶è§£æå¤±æ•—</h3>

<p><strong>å¯èƒ½åŸå› </strong>:</p>
<ul>
<li>æ–‡ä»¶æ ¼å¼ä¸æ”¯æ´</li>
<li>æ–‡ä»¶æå£</li>
<li>è§£ææœå‹™ç•°å¸¸</li>
</ul>

<p><strong>è§£æ±ºæ–¹æ³•</strong>:</p>
<ol>
<li>ç¢ºèªæ–‡ä»¶æ ¼å¼åœ¨æ”¯æ´åˆ—è¡¨ä¸­</li>
<li>å˜—è©¦é‡æ–°ä¸Šå‚³æ–‡ä»¶</li>
<li>æŸ¥çœ‹ ragflow-server æ—¥èªŒæ’æŸ¥éŒ¯èª¤</li>
</ol>

<hr>

<h2>é™„éŒ„ï¼šé…ç½®æª”æ¡ˆä¿®æ”¹ç¸½çµ</h2>

<p>ä»¥ä¸‹ä»¥å·¦å³å°æ¯”çš„æ–¹å¼å±•ç¤ºä¸‰å€‹é—œéµé…ç½®æª”æ¡ˆçš„åŸå§‹å…§å®¹èˆ‡ä¿®æ”¹å¾Œçš„å…§å®¹ã€‚</p>

<hr>

<h3>ä¸€ã€`.env` æª”æ¡ˆä¿®æ”¹å°æ¯”</h3>

<h4>ä¿®æ”¹é …ç›® 1: æ–‡ä»¶å¼•æ“è¨­å®š</h4>

<table>
<thead><tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr></thead>
<tbody>
<tr>
<td><code>DOC<em>ENGINE=${DOC</em>ENGINE:-elasticsearch}</code></td>
<td><code>DOC<em>ENGINE=${DOC</em>ENGINE:-infinity}</code></td>
</tr>
</tbody></table>

<h4>ä¿®æ”¹é …ç›® 2: é‹ç®—è¨­å‚™è¨­å®š</h4>

<table>
<thead><tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr></thead>
<tbody>
<tr>
<td><code>DEVICE=${DEVICE:-cpu}</code></td>
<td><code>DEVICE=${DEVICE:-gpu}</code></td>
</tr>
</tbody></table>

<h4>ä¿®æ”¹é …ç›® 3: Web æœå‹™åŸ è™Ÿè¨­å®š</h4>

<table>
<thead><tr>
<th>é…ç½®é …</th>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr></thead>
<tbody>
<tr>
<td>HTTP Port</td>
<td><code>SVR<em>WEB</em>HTTP_PORT=80</code></td>
<td><code>SVR<em>WEB</em>HTTP_PORT=8100</code></td>
</tr>
<tr>
<td>HTTPS Port</td>
<td><code>SVR<em>WEB</em>HTTPS_PORT=443</code></td>
<td><code>SVR<em>WEB</em>HTTPS_PORT=1443</code></td>
</tr>
</tbody></table>

<h4>ä¿®æ”¹é …ç›® 4: å•Ÿç”¨ TEI CPU Profile</h4>

<table>
<thead><tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr></thead>
<tbody>
<tr>
<td><code># COMPOSE<em>PROFILES=${COMPOSE</em>PROFILES},tei-cpu</code></td>
<td><code>COMPOSE<em>PROFILES=${COMPOSE</em>PROFILES},tei-cpu</code></td>
</tr>
</tbody></table>

<h4>ä¿®æ”¹é …ç›® 5: å…§åµŒæ¨¡å‹è¨­å®š â­ é‡è¦</h4>

<table>
<tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr>
<tr>
<td>

<pre><code>TEI_MODEL=${TEI_MODEL:-Qwen/Qwen3-Embedding-0.6B}
</code></pre>

</td>
<td>

<pre><code>#TEI_MODEL=BAAI/bge-large-zh-v1.5
TEI_MODEL=BAAI/bge-large-zh-v1.5
</code></pre>

</td>
</tr>
</table>

<h4>ä¿®æ”¹é …ç›® 6: MinerU é…ç½®ï¼ˆå¯é¸ï¼‰</h4>

<table>
<tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr>
<tr>
<td>

<pre><code># Uncommenting these lines will automatically 
# add MinerU to the model provider whenever possible.
# MINERU_DELETE_OUTPUT=0   # keep output directory
# MINERU_BACKEND=pipeline  # or another backend you prefer
</code></pre>

</td>
<td>

<pre><code># Enable Mineru
USE_MINERU=false
MINERU_EXECUTABLE="$HOME/uv_tools/.venv/bin/mineru"
MINERU_DELETE_OUTPUT=0   # keep output directory
MINERU_BACKEND=pipeline  # or another backend you prefer
</code></pre>

</td>
</tr>
</table>

<hr>

<h3>äºŒã€`docker-compose.yml` æª”æ¡ˆä¿®æ”¹å°æ¯”</h3>

<h4>ä¿®æ”¹é …ç›® 1: ragflow-server é‡å•Ÿç­–ç•¥</h4>

<table>
<thead><tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr></thead>
<tbody>
<tr>
<td><code>restart: unless-stopped</code></td>
<td><code>restart: on-failure</code></td>
</tr>
</tbody></table>

<h4>ä¿®æ”¹é …ç›® 2: å•Ÿç”¨ Admin Server èˆ‡ MCP Server</h4>

<table>
<tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr>
<tr>
<td>

<pre><code>ragflow-server:
  # ...å…¶ä»–é…ç½®
  restart: unless-stopped
  # Example configuration to start Admin server:
  command:
    - --enable-adminserver
  # MCP Server é…ç½®è¢«è¨»è§£
  #   - --enable-mcpserver
  #   - --mcp-host=0.0.0.0
  #   - --mcp-port=9382
  #   - --mcp-base-url=http://127.0.0.1:9380
  #   - --mcp-script-path=/ragflow/mcp/server/server.py
  #   - --mcp-mode=self-host
  #   - --mcp-host-api-key=ragflow-xxxxxx...
</code></pre>

</td>
<td>

<pre><code>ragflow-server:
  # ...å…¶ä»–é…ç½®
  restart: on-failure
  # Example configration to start Admin server:
  #   - --enable-adminserver
  # MCP Server é…ç½®å•Ÿç”¨
  command:
    - --enable-mcpserver
    - --mcp-host=0.0.0.0
    - --mcp-port=9382
    - --mcp-base-url=http://127.0.0.1:9380
    - --mcp-script-path=/ragflow/mcp/server/server.py
    - --mcp-mode=self-host
    - --mcp-host-api-key=ragflow-xxxxxx...
</code></pre>

</td>
</tr>
</table>

<hr>

<h3>ä¸‰ã€`docker-compose-base.yml` æª”æ¡ˆä¿®æ”¹å°æ¯”</h3>

<h4>ä¿®æ”¹é …ç›® 1: æ‰€æœ‰æœå‹™çš„é‡å•Ÿç­–ç•¥</h4>

<table>
<thead><tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr></thead>
<tbody>
<tr>
<td><code>restart: unless-stopped</code></td>
<td><code>restart: on-failure</code></td>
</tr>
</tbody></table>

<blockquote><p>æ­¤ä¿®æ”¹é©ç”¨æ–¼æ‰€æœ‰æœå‹™ï¼š<code>es</code>, <code>mysql</code>, <code>redis</code>, <code>minio</code>, <code>infinity</code>, <code>tei-cpu</code>, <code>tei-gpu</code> ç­‰</p></blockquote>

<h4>ä¿®æ”¹é …ç›® 2: Infinity æœå‹™ç‰ˆæœ¬</h4>

<table>
<tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr>
<tr>
<td>

<pre><code>infinity:
  image: infiniflow/infinity:v0.6.11
  restart: unless-stopped
  # ...å…¶ä»–é…ç½®
</code></pre>

</td>
<td>

<pre><code>infinity:
  image: infiniflow/infinity:v0.6.7
  restart: on-failure
  # ...å…¶ä»–é…ç½®
</code></pre>

</td>
</tr>
</table>

<h4>ä¿®æ”¹é …ç›® 3: TEI CPU æ¨¡å‹åŠ è¼‰è·¯å¾‘ â­ é‡è¦</h4>

<table>
<tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr>
<tr>
<td>

<pre><code>tei-cpu:
  profiles: ["tei-cpu"]
  image: ghcr.io/huggingface/text-embeddings-inference:cpu-1.5
  restart: unless-stopped
  volumes:
    - ${HF_HOME:-$HOME/.cache/huggingface}:/data
  command: 
    - "--model-id"
    - "/data/${TEI_MODEL}"
    - "--auto-truncate"
  # ...å…¶ä»–é…ç½®
</code></pre>

</td>
<td>

<pre><code>tei-cpu:
  profiles: ["tei-cpu"]
  image: ghcr.io/huggingface/text-embeddings-inference:cpu-1.5
  restart: on-failure
  volumes:
    - ${HF_HOME:-$HOME/.cache/huggingface}:/data
  command: 
    - "--model-id"
    - "${TEI_MODEL}"
    - "--auto-truncate"
  # ...å…¶ä»–é…ç½®
</code></pre>

</td>
</tr>
</table>

<blockquote><p><strong>é—œéµè®Šæ›´</strong>: æ¨¡å‹è·¯å¾‘å¾ <code>/data/${TEI<em>MODEL}</code> æ”¹ç‚º <code>${TEI</em>MODEL}</code>ï¼Œè®“ TEI è‡ªå‹•å¾ HuggingFace ä¸‹è¼‰æ¨¡å‹</p></blockquote>

<h4>ä¿®æ”¹é …ç›® 4: TEI GPU æ¨¡å‹åŠ è¼‰è·¯å¾‘ â­ é‡è¦</h4>

<table>
<tr>
<th>åŸå§‹å€¼ â¬…ï¸</th>
<th>ä¿®æ”¹å¾Œ â¡ï¸</th>
</tr>
<tr>
<td>

<pre><code>tei-gpu:
  profiles: ["tei-gpu"]
  image: ghcr.io/huggingface/text-embeddings-inference:1.5
  restart: unless-stopped
  volumes:
    - ${HF_HOME:-$HOME/.cache/huggingface}:/data
  command: 
    - "--model-id"
    - "/data/${TEI_MODEL}"
    - "--auto-truncate"
  # ...å…¶ä»–é…ç½®
</code></pre>

</td>
<td>

<pre><code>tei-gpu:
  profiles: ["tei-gpu"]
  image: ghcr.io/huggingface/text-embeddings-inference:1.5
  restart: on-failure
  volumes:
    - ${HF_HOME:-$HOME/.cache/huggingface}:/data
  command: 
    - "--model-id"
    - "${TEI_MODEL}"
    - "--auto-truncate"
  # ...å…¶ä»–é…ç½®
</code></pre>

</td>
</tr>
</table>

<blockquote><p><strong>é—œéµè®Šæ›´</strong>: èˆ‡ TEI CPU ç›¸åŒï¼Œæ¨¡å‹è·¯å¾‘æ”¹ç‚ºç›´æ¥ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼Œæ”¯æŒè‡ªå‹•ä¸‹è¼‰</p></blockquote>

<hr>

<h2>çµèª</h2>

<p>æ­å–œæ‚¨å®Œæˆ RAGFlow çš„å®‰è£èˆ‡é…ç½®ï¼ç¾åœ¨æ‚¨å¯ä»¥ï¼š</p>

<ol>
<li>âœ… ä¸Šå‚³å„ç¨®æ ¼å¼çš„æ–‡æª”å»ºç«‹çŸ¥è­˜åº«</li>
<li>âœ… ä½¿ç”¨é«˜å“è³ªçš„ä¸­æ–‡å…§åµŒæ¨¡å‹é€²è¡Œèªç¾©æª¢ç´¢</li>
<li>âœ… é€éå°è©±ç•Œé¢èˆ‡æ‚¨çš„çŸ¥è­˜åº«äº’å‹•</li>
<li>âœ… é–‹ç™¼åŸºæ–¼ RAG çš„æ™ºæ…§æ‡‰ç”¨</li>
</ol>

<p>å¦‚æœé‡åˆ°ä»»ä½•å•é¡Œï¼Œè«‹åƒè€ƒï¼š</p>

<ul>
<li><a href="https://ragflow.io/docs">RAGFlow å®˜æ–¹æ–‡æª”</a></li>
<li><a href="https://github.com/infiniflow/ragflow/issues">GitHub Issues</a></li>
<li><a href="https://github.com/infiniflow/ragflow/discussions">ç¤¾ç¾¤è¨è«–å€</a></li>
</ul>

<p>ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰</p>


</body>
</html>